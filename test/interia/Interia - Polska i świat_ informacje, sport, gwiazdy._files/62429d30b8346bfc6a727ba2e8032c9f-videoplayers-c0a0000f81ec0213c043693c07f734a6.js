(function(b,e){b.Inpl=b.Inpl||{};b.console=b.console||{log:function(){}};if(b.Inpl.hasOwnProperty("videoplayerTools")){console.log("Istnieje już [window.Inpl.videoplayerTools]");return}function c(g,f){return(" "+g.className+" ").indexOf(" "+f+" ")>-1}function a(f){if(Array.isArray){return Array.isArray(f)}else{if(Object.prototype.toString.call(f)==="[object Array]"){return true}}return false}var d=b.Inpl.videoplayerTools={addClass:function(g,f){if(!c(g,f)){g.className+=(g.className?" ":"")+f}return g},removeClass:function(g,f){var h=" "+g.className+" ";while(h.indexOf(" "+f+" ")>-1){h=h.replace(" "+f+" "," ")}g.className=typeof h.trim==="function"?h.trim():h.replace(/^\s+|\s+$/g,"");return g},domEle:function(f,g,i,h){var j=e.createElement(f);if(typeof g!=="undefined"&&g!==null){j.className=g}if(typeof i!=="undefined"&&i!==null){j.innerHTML=i}if(typeof h==="object"){Object.keys(h).forEach(function(k,l){if(h.hasOwnProperty(k)){j.setAttribute(k,h[k])}})}return j},append:function(f,g){if(arguments.length>2){Array.prototype.forEach.call(arguments,function(i,h){if(h<1||i===null){return}if(a(i)){i.forEach(function(j){if(j===null){return}f.appendChild(j)})}else{f.appendChild(i)}})}else{if(g===null){return f}if(a(g)){g.forEach(function(h){if(h===null){return}f.appendChild(h)})}else{f.appendChild(g)}}return f},loadScript:function(g,i,h){var f;f=e.createElement("script");f.id=i;f.src=g;e.head.appendChild(f);f.addEventListener("load",function(){(h)?h(this):console.log("Script loaded!")})},loadStyleSheet:function(g,j,i){var h;var f;if(e.getElementById(j)){return}h=e.createElement("link");h.type="text/css";h.rel="stylesheet";h.id=j;h.href=g;e.head.appendChild(h);f=e.createElement("img");f.onerror=function(){(i)?i(h):console.log("Stylesheet loaded!")};f.src=g},event:function(g,f,h){if(g.addEventListener){g.addEventListener(f,h)}else{if(g.attachEvent){g.attachEvent("on"+f,h)}}},throttle:function(h,f,g){f=f&&f%1===0?f:500;var i,j;return function(){var m=g||this;var l=+new Date();var k=arguments;if(i&&l<i+f){clearTimeout(j);j=setTimeout(function(){i=l;h.apply(m,k)},f)}else{i=l;h.apply(m,k)}}},extend:function(h,g){var f={};var i;for(i in h){if(Object.prototype.hasOwnProperty.call(h,i)){f[i]=h[i]}}for(i in g){if(Object.prototype.hasOwnProperty.call(g,i)){f[i]=g[i]}}return f},isElementInViewport:function(g,h){var f=g.getBoundingClientRect();h=h||600;return(f.top>=(0-h)&&f.left>=0&&f.bottom<=((window.innerHeight||document.documentElement.clientHeight)+h)&&f.right<=(window.innerWidth||document.documentElement.clientWidth))},isElementVisible:function(f){return !!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)}};b.Inpl.videoplayerDefaults={name:"videoplayerDefaults",pausedByUser:false,interactByUser:false,videoHeight:350,place:null,infoBlock:null,video:null,isPlaying:false,getName:function(){return this.name},getVideoUrl:function(){return"//www.interia.pl"},getCookieName:function(){return this.getName()+"-id-"+this.getWorkId()},isAutoplay:function(){return true},getPlace:function(){if(this.place!==null){return this.place}return this.place=e.getElementsByClassName("player-"+this.getName()+"-wrapper")[0]},checkVieport:function(g){var h=videojs.findPosition(g.getContainer());var f=typeof window.pageYOffset!="undefined"?window.pageYOffset:e.documentElement.scrollTop?e.documentElement.scrollTop:e.body.scrollTop?e.body.scrollTop:0;if(f+window.innerHeight-this.videoHeight/2>h.top&&h.top+this.videoHeight/2>f){return true}else{return false}},showInfoBlock:function(g){var h=this;var f=h.video.getCurrentTrack();if(h.infoBlock!==null){d.addClass(h.infoBlock,"player-"+h.getName()+"__infoblock--visible");d.removeClass(h.infoBlock,"player-"+h.getName()+"__infoblock--pause");d.removeClass(h.infoBlock,"player-"+h.getName()+"__infoblock--end");d.addClass(h.infoBlock,"player-"+h.getName()+"__infoblock--"+g);if(f){if(f.getPoster()){h.dom.info.thumbImage.src=f.getPoster()}if(f.hasParam("title")){h.dom.info.title.innerHTML=f.param("title")}if(f.hasParam("url")){h.dom.info.fbshare.href="http://www.facebook.com/sharer/sharer.php?u="+encodeURI(f.param("url"))}}return}d.append(h.getPlace(),h.infoBlock=d.append(d.domEle("div","player-"+h.getName()+"__infoblock player-"+h.getName()+"__infoblock--visible player-"+h.getName()+"__infoblock--"+g),d.append(h.dom.info.thumb=d.domEle("div","player-"+h.getName()+"__infoblock-thumb"),d.domEle("div","player-"+h.getName()+"__infoblock-thumb-ico"),h.dom.info.thumbImage=d.domEle("img","player-"+h.getName()+"__infoblock-thumb-img",null,{src:f.getPoster()})),d.append(d.domEle("div","player-"+h.getName()+"__infoblock-info"),h.dom.info.title=d.domEle("h2","player-"+h.getName()+"__infoblock-title",f.hasParam("title")?f.param("title"):""),h.dom.info.fbshare=d.domEle("a","player-"+h.getName()+"__infoblock-share","Udostępnij",{href:"http://www.facebook.com/sharer/sharer.php?u="+encodeURI(h.getVideoUrl()),target:"_blank"}))));d.event(h.dom.info.thumb,"click",function(){h.video.play()})},hideInfoBlock:function(){if(this.infoBlock!==null){d.removeClass(this.infoBlock,"player-"+this.getName()+"__infoblock--visible")}},renderHeader:function(g,h){var f=this;if(f.dom.header.container!=null){f.dom.header.title.innerHTML=g;if(h){f.dom.header.logo.style.display="block"}else{f.dom.header.logo.style.display="none"}return}d.append(f.getPlace(),f.dom.header.container=d.append(d.domEle("div","player-"+f.getName()+"__header  player-"+f.getName()+"__header--visible"),f.dom.header.title=d.domEle("div","player-"+f.getName()+"__title",g),f.dom.header.logo=d.domEle("img","player-"+f.getName()+"__logo",null,{src:"/i/videonews/logo.svg"})))},getVideoTrack:function(){var f=this.video.getCurrentTrack();if(f.isAd()){return f.getInitialTrack()}return f},getIwaParams:function(){var g=this.getVideoTrack();var f=this.video;var h=Math.round(f.duration()*100)/100;if(h===0){h=null}return{version:f.playerVersion,current_time:Math.round(f.currentTime()*100)/100,attachment_id:g.param("mid"),title:g.param("title")||"",origin:g.param("srcsign")||"",videoNr:f.getVideoNr(),duration:h,trackType:f.isVideo()?"video":"audio",place_stream:f.getIwaBlock()}},logIwa:function(g,f){if(!iwa){return}var h=this.getIwaParams();console.log("%c IWA ","background-color:#ff6633;color:#fff;",g,f,h);iwa("stream",g,f,h)}}})(window,document);(function(b,e){b.Inpl=b.Inpl||{};b.console=b.console||{log:function(){}};var d=b.Inpl.videoplayerTools||{};if(b.Inpl.hasOwnProperty("videonews")){console.log("Istnieje już [window.Inpl.videonews]");return}if(!b.videonewsConfig){console.log("Brak konfiguracji dla videonewsa, czyli brak [window.videonewsConfig]");return}var c=b.videonewsConfig;var a=0;if(c.tracks&&c.tracks[0]&&c.tracks[0].data&&c.tracks[0].data.id){a=c.tracks[0].data.id}else{console.log("Brak id materiału, czyli brak [window.videonewsConfig.tracks[0].data.id]");return}(function(){if(!(c&&c.videonewsCdnList&&c.videonewsAttachmentHost&&c.videonewsCdnList.length>0&&c.tracks[0].src)){return}var k=null;var j=c.videonewsCdnList.length;var l=c.videonewsCdnList;var h;var g=0;for(h=0;h<j;h++){g+=l[h].weight}var f=Math.floor(Math.random()*g);g=0;for(h=0;h<j;h++){g+=l[h].weight;if(g>=f){k=l[h];break}}c.tracks[0].src.lo[0].src=c.tracks[0].src.lo[0].src.replace(c.videonewsAttachmentHost,k.host);c.tracks[0].src.hi[0].src=c.tracks[0].src.hi[0].src.replace(c.videonewsAttachmentHost,k.host)})();b.Inpl.videonewsOptions={name:"videonews",videoHeight:350,isLastTrackEnded:false,dom:{header:{container:null,title:null,logo:null},info:{thumb:null,thumbImage:null,title:null,fbshare:null}},getWorkId:function(){return a},isAutoplay:function(){return c.videonewsAutoplay||false},getCategoryUrl:function(){return c.videonewsCategoryLink},getCategoryDesc:function(){return c.videonewsCategoryDesc+" &raquo;"},getPlace:function(){if(this.place!==null){return this.place}return this.place=d.append(d.domEle("div","player-videonews-wrapper"),d.domEle("div","player-videonews",null,{id:"player-videonews"}),d.domEle("a","player-videonews-link",this.getCategoryDesc(),{href:this.getCategoryUrl(),target:"_blank"}))},getVideoUrl:function(){return c.videonewsVideoLink},getTitle:function(){return c.videonewsTitle},wasWatched:function(){if(c.videonewsTestVideonewsWorkId&&c.videonewsTestVideonewsWorkId>0){return false}return Inpl.storage(this.getCookieName())?true:false},setWatched:function(){var f=new Date();f.setTime(f.getTime()+86400000);Inpl.storage(this.getCookieName(),1,{expires:f})},monitorViewport:function(f){if(this.checkVieport(f)){if((!Inpl.videos&&this.pausedByUser===false&&this.isLastTrackEnded===false)||(Inpl.videos&&Inpl.videos.isPlaying===false&&this.pausedByUser===false&&this.isLastTrackEnded===false)){f.play()}}else{if(this.pausedByUser===false&&this.interactByUser===false){f.pause()}}},init:function(){var h=this;if(this.wasWatched()){return}var g=e.querySelector(".tiles-li.is-video-news");if(!g){return}g.innerHTML="";d.append(g,this.getPlace());var f=this.video=Inpl.Video.createInstance(c);f.on("ended",function(){var i=this.getTrackList();if(i&&i.isLastTrack()){h.isLastTrackEnded=true}h.isPlaying=false;h.showInfoBlock("end")});f.on("trackindexchange",function(){var i=this.getCurrentTrack();if(i.isAd()){h.renderHeader("",false)}else{h.renderHeader(i.hasParam("title")?i.param("title"):"",true)}});d.event(this.getPlace(),"click",function(){if(h.pausedByUser){return}var i=function(){h.pausedByUser=true};f.on("pause",i);setTimeout(function(){f.off("pause",i)},500)});f.on("pause",function(){h.isPlaying=false;h.showInfoBlock("pause")});f.on("play",function(){h.isPlaying=true;if(Inpl.videos&&Inpl.videos.video){Inpl.videos.video.pause()}h.hideInfoBlock("pause");h.hideInfoBlock("end")});f.one("play",function(){h.setWatched()});f.on("ready",function(){var i=f.getCurrentTrack();i.curQuality("lo");this.trigger("changequality",i.curQuality());this._player.src(this.getTrackList().getCurrentTrack().getSrc());f.muted(true);setTimeout(function(){var k=f.muted()?0:f.volume();var j=setInterval(function(){window.vjs.trigger(f._player.controlBar.buttonsPanel.volumeChange.el_,"mousemove")},1000);f.on("volumechange",function(){h.interactByUser=true;clearInterval(j);var l=f.volume();if(k==0&&l>0){h.logIwa("content","muteoff")}else{if(k>0&&l==0){h.logIwa("content","muteon")}}k=l})},100);if(h.isAutoplay()){h.monitorViewport(h.video);d.event(window,"scroll",d.throttle(function(){h.monitorViewport(h.video)},300))}});f.on("fullscreenchange",function(){var i=f.getCurrentTrack();var j=i.curQuality();if(j!=="hi"){i.curQuality("hi");this.trigger("changequality",i.curQuality());this._player.src(this.getTrackList().getCurrentTrack().getSrc())}f.muted(false);f.play();if(this.isFullScreen()){h.logIwa("content","fullscreen")}})}};b.Inpl.videonews=d.extend(b.Inpl.videoplayerDefaults,b.Inpl.videonewsOptions);d.event(b,"load",function(){d.loadStyleSheet(c.stylespath,"videoplayerCss",function(){console.log("videoplayer STYLES has loaded.")});d.loadScript("https://iwa.iplsc.com/gsscript.js","gsScript",function(){console.log("gsscript has loaded.")});d.loadScript(c.scriptpath,"videoplayerScript",function(){console.log("videoplayer has loaded.");setTimeout(function(){Inpl.videonews.init()},500)})})})(window,document);(function(c,g){c.Inpl=c.Inpl||{};c.console=c.console||{log:function(){}};var f=c.Inpl.videoplayerTools||{};if(c.Inpl.hasOwnProperty("videos")){console.log("Istnieje już [window.Inpl.videos]");return}if(!c.playerVideosConfig){console.log("Brak konfiguracji dla pierwszego tracka videoplayera, czyli brak [window.playerVideosConfig]");if(!c.playerVideosPlaylist){console.log("Brak konfiguracji dla videos, czyli brak [window.playerVideosPlaylist]");return}}var d=c.playerVideosConfig;var b=c.playerVideosPlaylist;var a=0;if(d&&d.tracks&&d.tracks[0]&&d.tracks[0].data&&d.tracks[0].data.id){a=d.tracks[0].data.id}else{console.log("Brak id materiału, czyli brak [window.playerVideosConfig.tracks[0].data.id]")}var e=c.Inpl.videosOptions={name:"videos",videoHeight:229,isYouTubePlaying:false,isLastTrack:false,youTubePlayerId:"yt-player",youTubePlayer:null,dom:{header:{container:null,title:null,logo:null},info:{thumb:null,thumbImage:null,title:null,fbshare:null}},xNewsPlayer:{hasStarted:false,init:function(h){var i=g.createElement("script");i.setAttribute("type","application/javascript");i.setAttribute("class","XlinkEmbedScript");i.setAttribute("data-url",h.externalSrc);i.setAttribute("data-width",h.width);i.setAttribute("data-height",h.height);i.setAttribute("src","//js.iplsc.com/inpl.xnews/1.0.0/xlink-i.js");i.setAttribute("async","true");g.getElementById("videos").appendChild(i)},monitorViewport:function(h){if(!this.hasStarted&&f.isElementInViewport(h)&&f.isElementVisible(h)){this.init({width:b[0].data.width,height:b[0].data.height,externalSrc:b[0].externalSrc});this.hasStarted=true}}},getWorkId:function(){return a},monitorViewport:function(h){if(this.checkVieport(h)){if((!Inpl.videonews&&this.pausedByUser===false&&this.isLastTrack===false)||(Inpl.videonews&&Inpl.videonews.isPlaying===false&&this.pausedByUser===false&&this.isLastTrack===false&&this.isYouTubePlaying===false)){h.play()}}else{if(this.pausedByUser===false&&this.interactByUser===false&&this.isPlaying===false){h.pause()}}},prepareTrackData:function(i){var j=i;var h={lo:[],hi:[]};if(j.src.hi[0].src){h.hi.push({type:"video/mp4",src:j.src.hi[0].src})}if(j.src.lo[0].src){h.lo.push({type:"video/mp4",src:j.src.lo[0].src})}return{title:j.data.title,src:h,width:j.data.width,height:j.data.height,poster:j.data.poster,data:{title:j.data.title,id:j.data.id,orig:j.data.orig,nsp:j.data.nsp,mid:j.data.mid,desc:j.data.desc,url:j.data.url,srcsign:j.data.srcsign,gemiusStreamParams:{typologyId:j.data.gemiusStreamParams.typologyId,kaf:j.data.gemiusStreamParams.kaf}}}},addTracks:function(m,j){var l;var k;var h;var n=function(p){var o=j[p].data.url;var i=m.getTrack(p);if(o&&i){i.param("url",o)}};n(0);for(k=1;k<3;k+=1){l=this.prepareTrackData(j[k]);h=m.createTrackItem(l);h.curQuality("lo");m.append(h)}},linksDom:null,getLinksDom:function(){if(this.linksDom!==null){return this.linksDom}var h=g.querySelectorAll("#videos li.videos-li");var k=[];for(var j=0,l=h.length;j!=l;j++){k.push(h[j])}this.linksDom=k;return k},createVideoplayerDom:function(h){return f.append(f.domEle("div","player-videos-wrapper",null,{style:"width:405px; height:229px;"}),f.domEle("div",null,null,{id:h}))},insertVideoplayerDom:function(i,h){h.insertBefore(i,h.firstChild)},swapArray:function(i,k,j){var h=i[j];i[j]=i[k];i[k]=h},imageChange:function(i,h){switch(h){case"small":i.width=190;i.height=107;break;case"big":i.width=405;i.height=229;break}},changeLinkOrder:function(){var h=this.getLinksDom();h[2].parentNode.insertBefore(h[2],h[0]);h[1].parentNode.insertBefore(h[1],h[2]);this.swapArray(h,0,1);this.swapArray(h,1,2);f.addClass(h[0],"i1 photo-large");f.removeClass(h[0],"i2");f.removeClass(h[0],"photo-small");this.imageChange(h[0].querySelector(".videos-img"),"big");f.addClass(h[1],"i2");f.removeClass(h[1],"i3");this.imageChange(h[1].querySelector(".videos-img"),"small");f.addClass(h[2],"i3 photo-small");f.removeClass(h[2],"i1");f.removeClass(h[2],"photo-large");this.imageChange(h[2].querySelector(".videos-img"),"small")},changeVideoQuality:function(h){if(h.indexOf("-V2.")!==-1){h=h.replace("-V2.","-V3.")}return h},onYouTubePlayerStateChange:function(h){switch(h.data){case YT.PlayerState.PLAYING:e.isYouTubePlaying=true;e.video.pause();break;default:e.isYouTubePlaying=false}},watchYouTubePlayerState:function(){this.youTubePlayer=typeof YT!=="undefined"?YT.get(this.youTubePlayerId):null;if(!this.youTubePlayer){return}this.youTubePlayer.addEventListener("onStateChange",this.onYouTubePlayerStateChange)},init:function(){var i=this;i.insertVideoplayerDom(i.createVideoplayerDom(d.elId),g.getElementById("videos"));d.tracks[0].src.lo[0].src=i.changeVideoQuality(d.tracks[0].src.lo[0].src);var h=i.video=Inpl.Video.createInstance(d);var j=h.getTrackList();i.addTracks(j,b);i.watchYouTubePlayerState();h.on("ended",function(){var k=this.getCurrentTrack();i.isPlaying=false;i.showInfoBlock("end");if(!j.isLastTrack()){h.nextAndPlay();if(!k.isAd()){i.changeLinkOrder()}}else{i.isLastTrack=true}});h.on("trackindexchange",function(){var k=this.getCurrentTrack();i.renderHeader("",k.isAd()?false:true)});f.event(this.getPlace(),"click",function(){if(i.pausedByUser){return}var k=function(){i.pausedByUser=true};h.on("pause",k);setTimeout(function(){h.off("pause",k)},500)});h.on("pause",function(){i.isPlaying=false;i.showInfoBlock("pause")});h.on("play",function(){i.isPlaying=true;if(Inpl.videonews&&Inpl.videonews.video){Inpl.videonews.video.pause()}i.hideInfoBlock("pause");i.hideInfoBlock("end");if(i.youTubePlayer){i.youTubePlayer.pauseVideo()}});h.on("ready",function(){var k=h.getCurrentTrack();k.curQuality("lo");this.trigger("changequality",k.curQuality());this._player.src(this.getTrackList().getCurrentTrack().getSrc());h.muted(true);setTimeout(function(){var m=h.muted()?0:h.volume();var l=setInterval(function(){window.vjs.trigger(h._player.controlBar.buttonsPanel.volumeChange.el_,"mousemove")},1000);h.on("volumechange",function(){i.interactByUser=true;clearInterval(l);var n=h.volume();if(m==0&&n>0){i.logIwa("content","muteoff")}else{if(m>0&&n==0){i.logIwa("content","muteon")}}m=n})},100);if(i.isAutoplay()){i.monitorViewport(i.video);f.event(window,"scroll",f.throttle(function(){i.monitorViewport(i.video)},300))}});h.on("fullscreenchange",function(){var k=h.getCurrentTrack();var l=k.curQuality();if(l!=="hi"){k.curQuality("hi");this.trigger("changequality",k.curQuality());this._player.src(this.getTrackList().getCurrentTrack().getSrc())}h.muted(false);h.play();if(this.isFullScreen()){i.logIwa("content","fullscreen")}})}};c.Inpl.videos=f.extend(c.Inpl.videoplayerDefaults,c.Inpl.videosOptions);f.event(c,"load",function(){var i=c.Inpl.videos||{};var h;if(d){f.loadStyleSheet(d.stylespath,"videoplayerCss",function(){console.log("videoplayer STYLES has loaded.")});f.loadScript("https://iwa.iplsc.com/gsscript.js","gsScript",function(){console.log("gsscript has loaded.")});f.loadScript(d.scriptpath,"videoplayerScript",function(){console.log("videoplayer has loaded.");setTimeout(function(){i.init()},500)})}else{if(b[0].isXnews===true){h=g.querySelector("#videos li.i1 img");i.xNewsPlayer.monitorViewport(h);f.event(window,"scroll",f.throttle(function(){i.xNewsPlayer.monitorViewport(h)},300))}}})})(window,document);